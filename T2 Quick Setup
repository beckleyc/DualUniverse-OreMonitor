{"slots":{"0":{"name":"screen","type":{"events":[],"methods":[]}},"1":{"name":"chromite","type":{"events":[],"methods":[]}},"2":{"name":"limestone","type":{"events":[],"methods":[]}},"3":{"name":"malachite","type":{"events":[],"methods":[]}},"4":{"name":"natron","type":{"events":[],"methods":[]}},"5":{"name":"slot6","type":{"events":[],"methods":[]}},"6":{"name":"slot7","type":{"events":[],"methods":[]}},"7":{"name":"slot8","type":{"events":[],"methods":[]}},"8":{"name":"slot9","type":{"events":[],"methods":[]}},"9":{"name":"slot10","type":{"events":[],"methods":[]}},"-1":{"name":"unit","type":{"events":[],"methods":[]}},"-2":{"name":"system","type":{"events":[],"methods":[]}},"-3":{"name":"library","type":{"events":[],"methods":[]}}},"handlers":[{"code":"unit.setTimer(\"Live\",1)","filter":{"args":[],"signature":"start()","slotKey":"-1"},"key":"0"},{"code":"local smallVolume = 10400\nlocal mediumVolume = 83200\nlocal largeVolume = 166400\n\nfunction round(number,decimals)\n    local power = 10^decimals\n    return math.floor((number/1000) * power) / power\nend \n\nfunction oreStatus(percent)\n    if percent <= 25 then return \"<th style=\\\"color: red;\\\">LOW</th>\"\n    elseif percent > 25 and percent < 50 then return \"<th style=\\\"color: orange;\\\">LOW</th>\"\n    else return \"<th style=\\\"color: green;\\\">GOOD</th>\"\n    end \nend\n\nfunction getContainerVolume(size)\n    if size == \"S\" or size == \"s\" then return smallVolume\n    \telseif size == \"M\" or size == \"m\" then return mediumVolume\n    \telseif size == \"L\" or size == \"l\" then return largeVolume\n    \telse return mediumVolume\n    end\nend\n\nlocal useL = 1 --export: Use 1 for L or 0 for t\nif useL == 1 then\n    unitMeasure = \"KL\"\nelseif useL == 0 then\n    unitMeasure = \"T\"\nend\n\n-- Chromite Variables \nlocal chromiteContainerSize = \"M\" --export: Size of the container (S, M, L)\nlocal maxChromite = getContainerVolume(chromiteContainerSize)\nlocal weightChromite = 4.54 --export:\nif useL == 1 then\n    massChromite = round(math.ceil(chromite.getItemsMass()/weightChromite),1)\nelseif useL == 0 then\n    massChromite = round(math.ceil(chromite.getItemsMass()),1)\nend\nlocal percentChromite = math.ceil(((math.ceil((chromite.getItemsMass()/weightChromite) - 0.5)/maxChromite)*100))\nlocal statusChromite = oreStatus(percentChromite)\n\n    \n-- Limestone Variables\nlocal limestoneContainerSize = \"M\" --export: Size of the container (S, M, L)\nlocal maxLimestone = getContainerVolume(limestoneContainerSize)\nlocal weightLimestone = 2.71 --export:\nif useL == 1 then\n    massLimestone = round(math.ceil(limestone.getItemsMass()/weightLimestone),1)\nelseif useL == 0 then\n    massLimestone = round(math.ceil(limestone.getItemsMass()),1)\nend\nlocal percentLimestone = math.ceil(((math.ceil((limestone.getItemsMass()/weightLimestone) - 0.5)/maxLimestone)*100))\nlocal statusLimestone = oreStatus(percentLimestone)\n\n-- Malachite Variables\nlocal malachiteContainerSize = \"M\" --export: Size of the container (S, M, L)\nlocal maxMalachite = getContainerVolume(malachiteContainerSize)\nlocal weightMalachite = 4.00 --export:\nif useL == 1 then\n    massMalachite = round(math.ceil(malachite.getItemsMass()/weightMalachite),1)\nelseif useL == 0 then\n    massMalachite = round(math.ceil(malachite.getItemsMass()),1)\nend\nlocal percentMalachite = math.ceil(((math.ceil((malachite.getItemsMass()/weightMalachite) - 0.5)/maxMalachite)*100))\nlocal statusMalachite = oreStatus(percentMalachite)\n\n-- Natron Variables\nlocal natronContainerSize = \"M\" --export: Size of the container (S, M, L)\nlocal maxNatron = getContainerVolume(natronContainerSize)\nlocal weightNatron = 1.55 --export:\nif useL == 1 then\n    massNatron = round(math.ceil(natron.getItemsMass()/weightNatron),1)\nelseif useL == 0 then\n    massNatron = round(math.ceil(natron.getItemsMass()),1)\nend\nlocal percentNatron = math.ceil(((math.ceil((natron.getItemsMass()/weightNatron) - 0.5)/maxNatron)*100))\nlocal statusNatron = oreStatus(percentNatron)\n\n\nhtml = [[\n<div class=\"bootstrap\">\n<h1 style=\"\n\tfont-size: 8em;\n\">T2 Ore Status</h1>\n<table \nstyle=\"\n\tmargin-top: 10px;\n\tmargin-left: auto;\n\tmargin-right: auto;\n\twidth: 80%;\n\tfont-size: 4em;\n\">\n\t</br>\n\t<tr style=\"\n\t\twidth: 100%;\n\t\tmargin-bottom: 30px;\n\t\tbackground-color: blue;\n\t\tcolor: white;\n\t\">\n\t\t<th>Ore</th>\n\t\t<th>Qty</th>\n\t\t<th>Levels</th>\n\t\t<th>Status</th>\n\t<tr>\n\t\t<th>Chromite</th>\n\t\t<th>]]..massChromite..unitMeasure..[[</th>\n\t\t<th>]]..percentChromite..[[%</th>\n\t\t]]..statusChromite..[[\n\t</tr>\n\t<tr>\n\t\t<th>Limestone</th>\n\t\t<th>]]..massLimestone..unitMeasure..[[</th>\n\t\t<th>]]..percentLimestone..[[%</th>\n\t\t]]..statusLimestone..[[\n\t</tr>\n\t<tr>\n\t\t<th>Malachite</th>\n\t\t<th>]]..massMalachite..unitMeasure..[[</th>\n\t\t<th>]]..percentMalachite..[[%</th>\n\t\t]]..statusMalachite..[[\n\t</tr>\n\t<tr>\n\t\t<th>Natron</th>\n\t\t<th>]]..massNatron..unitMeasure..[[</th>\n\t\t<th>]]..percentNatron..[[%</th>\n\t\t]]..statusNatron..[[\n\t</tr>\n\n</table>\n</div>\n]]\n\nscreen.setHTML(html)","filter":{"args":[{"value":"Live"}],"signature":"tick(timerId)","slotKey":"-1"},"key":"1"},{"code":"screen.clear()","filter":{"args":[],"signature":"stop()","slotKey":"-1"},"key":"2"}],"methods":[],"events":[]}
